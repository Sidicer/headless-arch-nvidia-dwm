# Arch Linux Headless Streaming Server (Nvidia)

Configuration to run a fully headless server for **Game** or **Video streaming** which has a remote (virtual) desktop without using a physical dummy connector for GPU or xf86-video-dummy (which doesn't use GPU to render).  
DWM used due to how light-weight it is.

Things that I run personally are:
* [qbittorrent-nox](https://archlinux.org/packages/extra/x86_64/qbittorrent-nox/) (w/ WebUI)
* [jellyfin-server](https://archlinux.org/packages/?name=jellyfin-server) (video streaming)
* [sunshine](https://aur.archlinux.org/packages/sunshine) (game streaming, remote desktop)
* [steam](https://archlinux.org/packages/multilib/x86_64/steam/) (big picture)

# Quick-start
```sh
# If yay & nvidia drivers setup already
yay -S --sudoloop --noconfirm --needed \
  dwm zsh xorg-server xorg-xinit sunshine nvidia-settings

git clone git@github.com:Sidicer/headless-arch-nvidia-dwm.git && cd headless-arch-nvidia-dwm
sudo cp nvidia-xconfig.conf /etc/X11/xorg.conf.d/10-headless.conf
cp .xinitrc ~/.xinitrc
cp .zprofile ~/.zprofile
```
How to setup NVIDIA on Arch: [My previous .dotfiles](https://github.com/sidicer/dotfiles) or [Arch Linux NVIDIA drivers installation guide](https://github.com/korvahannu/arch-nvidia-drivers-installation-guide)

---
`nvidia-xconfig.conf` should be copied to `/etc/X11/xorg.conf.d/10-headless.conf`
```sh
sudo cp nvidia-xconfig.conf /etc/X11/xorg.conf.d/10-headless.conf
```
It was generated by plugging in a monitor temporarily and exporting the X11 settings from `nvidia-settings`, but can confirm that it will work on any system without modification

---
`.xinitrc` is mainly default taken from `/etc/X11/xinit/xinitrc`, just replaced `twm, xclock, xterm` startup commands with  
```sh
nvidia-settings --load-config-only & sunshine & exec dwm
```
which loads nvidia user settings from `~/.nvidia-settings-rc`, starts `sunshine` server and `DWM`

---
`.zprofile` just has `startx` to auto-start X server.
```sh
# If not running zsh:
mv .zprofile ~/.bash_profile
